# Документация PyScribe

## Обзор

PyScribe - это современный кроссплатформенный редактор кода с поддержкой проектов, написанный на Python с использованием PyQt5. Приложение предоставляет расширенные возможности для работы с кодом, включая управление проектами, проводник файлов, терминал и инструменты для запуска кода.

## Архитектура приложения

### Основные классы

#### 1. ApplicationManager

 **Назначение** : Централизованное управление настройками и состоянием приложения

**Основные свойства:**

* `base_path: Path` - базовый путь приложения
* `settings: Dict` - загруженные настройки
* `recent_files: List[str]` - список недавних файлов
* `session_files: List[str]` - файлы текущей сессии

**Свойства:**

* `colors: Dict[str, str]` - цветовая схема приложения
* `fonts: Dict[str, int]` - настройки шрифтов
* `languages: Dict[str, Any]` - поддерживаемые языки программирования

#### 2. ModernMainWindow

 **Назначение** : Главное окно приложения, координатор всех компонентов

**Основные атрибуты:**

* `app_manager: ApplicationManager` - менеджер приложения
* `unsaved_files_count: int` - счетчик несохраненных файлов
* `sidebar_visible: bool` - видимость боковой панели
* `config_path: Path` - путь к конфигурации аргументов запуска

**Вложенные менеджеры:**

* `ui_manager: UIManager` - управление интерфейсом
* `file_manager: FileManager` - операции с файлами
* `project_manager: ProjectManager` - управление проектами
* `code_runner: CodeRunner` - запуск кода

#### 3. UIManager

 **Назначение** : Управление пользовательским интерфейсом

**Основные методы:**

* `setup_ui()` - инициализация интерфейса
* `_setup_central_widget()` - настройка центрального виджета
* `_setup_menu_bar()` - создание меню
* `_setup_explorer_panel()` - настройка проводника файлов

#### 4. FileManager

 **Назначение** : Управление файловыми операциями

**Ключевые методы:**

* `open_file(file_path: str)` - открытие файла в редакторе
* `open_recent_file(file_path: str)` - открытие файла из списка недавних
* `save_file(editor) -> bool` - сохранение файла
* `save_all_files()` - сохранение всех открытых файлов

#### 5. ProjectManager

 **Назначение** : Управление проектами

**Основные методы:**

* `open_project()` - открытие диалога выбора проекта
* `on_project_opened(project_config)` - обработчик открытия проекта
* `run_project()` - запуск текущего проекта
* `open_project_files(project_config)` - открытие файлов проекта

#### 6. CodeRunner

 **Назначение** : Запуск и выполнение кода

**Основные методы:**

* `run_code()` - запуск кода из текущего редактора
* Использует `FabricRunCode` для выполнения кода в различных средах

## Основные компоненты интерфейса

### Меню приложения

**File (Файл):**

* New (Ctrl+N) - создание нового файла
* Open (Ctrl+O) - открытие файлов
* Open Project (Ctrl+Shift+O) - открытие проекта
* Recent - список недавних файлов
* Save (Ctrl+S) - сохранение файла
* Save All (Ctrl+Alt+S) - сохранение всех файлов

**Edit (Правка):**

* Стандартные операции: Undo, Redo, Cut, Copy, Paste, Select All

**Run (Запуск):**

* Run (Ctrl+Shift+X) - запуск кода
* Launch Parameters (Shift+F4) - параметры запуска

**Project (Проект):**

* Project Manager (Ctrl+Shift+P) - управление проектами
* Run Project (F5) - запуск проекта
* Run File (Ctrl+F5) - запуск файла
* Project Settings - настройки проекта

### Вкладки и редактор

**TabWidget:**

* Управление множественными вкладками с редакторами
* Поддержка несохраненных изменений (маркер *)
* Возможность закрытия отдельных вкладок

**ModernCodeEditor:**

* Современный редактор кода с подсветкой синтаксиса
* Поддержка различных языков программирования
* Автодополнение и проверка кода

### Проводник файлов

**Explorer:**

* Дерево файловой системы
* Навигация по директориям
* Двойной клик для открытия файлов

**Панель инструментов:**

* Кнопки: Up, Copy, Paste, Delete
* Автоматическое отображение при открытии проекта

## Ключевые функциональные возможности

### Управление сессиями

* Автоматическое сохранение состояния сессии
* Восстановление открытых файлов при перезапуске
* Резервное копирование файлов

### Система проектов

* Создание и управление проектами
* Настройка команд запуска для проектов
* Автоматическое открытие основных файлов проекта
* Индикатор текущего проекта в статусной строке

### Запуск кода

* Поддержка множества языков программирования
* Настраиваемые параметры запуска
* Синхронный и асинхронный запуск
* Интеграция с системным терминалом

### Настройки и кастомизация

* Темная тема оформления
* Настраиваемые цвета и шрифты
* Поддержка различных языков программирования
* Гибкая система горячих клавиш

## Конфигурационные файлы

### launchArgs.json

Хранит аргументы запуска для отдельных файлов:

**json**

```
{
    "/path/to/file.py": "--arg1 value1 --arg2 value2"
}
```

### settings.json

Основные настройки приложения:

* Цветовая схема
* Настройки шрифтов
* Поддерживаемые языки
* Параметры интерфейса

## Обработка ошибок

Приложение использует единообразную систему обработки ошибок:

* `CustomDialog` для пользовательских сообщений об ошибках
* Логирование в консоль для отладки
* Graceful degradation при невозможности выполнения операций

## Расширяемость

Архитектура позволяет легко добавлять:

* Новые типы редакторов
* Дополнительные инструменты разработки
* Поддержку новых языков программирования
* Интеграции с внешними сервисами

## Зависимости

* **PyQt5** - графический интерфейс
* **pathlib** - работа с путями файловой системы
* **json** - работа с конфигурационными файлами
* **subprocess** - запуск внешних процессов

## Структура проекта

```
pyscribe/
├── main.py                 # Главный файл приложения
├── utils/                  # Вспомогательные модули
│   ├── FabricRunCode.py    # Запуск кода
│   └── programs.py         # Работа с настройками
├── widgets/               # Пользовательские виджеты
│   ├── QCodeEditor.py     # Редактор кода
│   ├── ProjectManager.py  # Управление проектами
│   ├── Explorer.py        # Проводник файлов
│   └── ...               # Другие виджеты
└── config/               # Конфигурационные файлы
    └── launchArgs.json   # Аргументы запуска
```
